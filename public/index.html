<!DOCTYPE html>
<html>

<head>
  <title>Flappy Ferris - Bevy Web App</title>
  <style>
    :root {
      --blue-sky-color: #80b2cc;
    }

    body {
      margin: 0px;
      background-color: var(--blue-sky-color), steelblue;
    }
  </style>
</head>

<body>
  <script type="module">
    import init from './flappy_bird.js'; // Import the generated JS wrapper module
    import emitSpacebarPress from './emit_space_press.js';
    import fitElementToScreen from './fit_element_to_screen.js'

    async function run() {
      try {
        await init(); // Wait for the WASM module to be initialized
        const canvas = document.querySelector("[alt='Flappy Bird']");
        // Respond to touch/click events
        canvas.addEventListener("click", () => emitSpacebarPress(canvas))
        canvas.addEventListener("touchstart", () => emitSpacebarPress(canvas))
        // Resize canvas to fit screen
        canvas.style.display = "block";
        setTimeout(() => fitElementToScreen(canvas), 0)
        window.addEventListener('resize', () => setTimeout(() => fitElementToScreen(canvas), 0));
      } catch (error) {
        console.error(error)
      }
    }

    run();
  </script>
</body>

</html>